{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Diego/Documents/Ecommers%20Don%20Rimos/client/src/app/admin/agregar/page.jsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from \"react\";\r\n\r\nexport default function AdminMenu() { \r\n\r\n  const [formulario, setFormulario] = useState({\r\n    nombre: '',\r\n    descripcion: '',\r\n    precio: '',\r\n    categoria: '',\r\n    stock: ''\r\n  });\r\n\r\n  const [archivosSeleccionados, setArchivosSeleccionados] = useState(null);\r\n  const [mensaje, setMensaje] = useState('');\r\n  const [Previews, setPreviews] = useState([]);\r\n\r\n  const handleChange = (e) => {\r\n    setFormulario({ ...formulario, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleArchivo = (e) => {\r\n    const archivos = Array.from(e.target.files);\r\n    setArchivosSeleccionados(archivos);\r\n    const previews = archivos.map(archivo => URL.createObjectURL(archivo));\r\n    setPreviews(previews)\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!archivosSeleccionados || archivosSeleccionados.length === 0) {\r\n      setMensaje('Por favor selecciona al menos una imagen');\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n\r\n    archivosSeleccionados.forEach((archivo) =>{\r\n      formData.append('imagenes', archivo);\r\n    });\r\n\r\n    formData.append('nombre', formulario.nombre);\r\n    formData.append('descripcion', formulario.descripcion);\r\n    formData.append('precio', parseFloat(formulario.precio));\r\n    formData.append('categoria', formulario.categoria);\r\n    formData.append('stock', parseInt(formulario.stock));\r\n\r\n    try {\r\n      const res = await fetch('http://localhost:3001/api/productos', {\r\n        method: 'POST',\r\n        body: formData\r\n      });\r\n\r\n      if (res.ok) {\r\n        setMensaje('✅ Producto creado correctamente');\r\n        setFormulario({\r\n          nombre: '',\r\n          descripcion: '',\r\n          precio: '',\r\n          categoria: '',\r\n          stock: ''\r\n        });\r\n        setArchivosSeleccionados([]);\r\n        setPreviews([]);\r\n      } else {\r\n        const data = await res.json();\r\n        setMensaje(`❌ Error al crear el producto: ${data.error || 'Error desconocido'}`);\r\n      }\r\n    } catch (error) {\r\n      setMensaje('❌ Error al conectar con el servidor');\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"text-black p-8 max-w-2xl mx-auto\">\r\n      <h1 className=\"text-2xl font-bold mb-4 text-center\">Agregar Producto</h1>\r\n\r\n      <form onSubmit={handleSubmit} className=\"grid gap-4\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"nombre\"\r\n          placeholder=\"Nombre\"\r\n          value={formulario.nombre}\r\n          onChange={handleChange}\r\n          required\r\n          className=\"border p-2 rounded\"\r\n        />\r\n        <textarea\r\n          name=\"descripcion\"\r\n          placeholder=\"Descripción\"\r\n          value={formulario.descripcion}\r\n          onChange={handleChange}\r\n          required\r\n          className=\"border p-2 rounded\"\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          name=\"precio\"\r\n          placeholder=\"Precio\"\r\n          value={formulario.precio}\r\n          onChange={handleChange}\r\n          required\r\n          className=\"border p-2 rounded\"\r\n        />\r\n        \r\n        <input\r\n        type=\"text\"\r\n        name=\"categoria\"\r\n        placeholder=\"Categoría\"\r\n        value={formulario.categoria}\r\n        onChange={handleChange}\r\n        required\r\n        className=\"border p-2 rounded\"\r\n        />\r\n        \r\n        <input\r\n          type=\"number\"\r\n          name=\"stock\"\r\n          placeholder=\"Stock\"\r\n          value={formulario.stock}\r\n          onChange={handleChange}\r\n          required\r\n          className=\"border p-2 rounded\"\r\n        />\r\n\r\n        <div className=\"flex flex-col gap-2\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <span className=\"text-gray-700 text-sm\">\r\n                {archivosSeleccionados ? archivosSeleccionados.name : 'Ningún archivo Seleccionado'}\r\n            </span>\r\n            \r\n            <button \r\n              type=\"button\"\r\n              onClick={() => document.getElementById('inputArchivo').click()}\r\n              className=\"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded\"\r\n              >\r\n                Seleccionar Archivo\r\n            </button>\r\n              \r\n            <input\r\n              id=\"inputArchivo\"\r\n              type=\"file\"\r\n              multiple\r\n              onChange={handleArchivo}\r\n              accept=\"image/*\"\r\n              required\r\n              className=\"border p-2 rounded hidden\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-3 gap-2 mt-2\">\r\n            {Previews.map((src, index) =>\r\n              <img\r\n                key={index}  \r\n                src={src}\r\n                alt={`Preview ${index}`}\r\n                className=\"h-20 w-full object-cover border rounded\"\r\n              />\r\n            )}\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-orange-500 hover:bg-orange-600 text-white border py-2 px-4 rounded\"\r\n        >\r\n          Crear Producto\r\n        </button>\r\n      </form>\r\n\r\n      {mensaje && <p className=\"mt-4 text-sm text-center text-gray-700\">{mensaje}</p>}\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}